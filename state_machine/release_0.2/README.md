README
===========================
状态机生成工具

****
	
|Author|Z|
|---|---
|E-mail|zhutong@nbhope.cn


****
## 目录
- [README](#readme)
  - [目录](#%E7%9B%AE%E5%BD%95)
  - [基本说明](#%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E)
  - [rule配置](#rule%E9%85%8D%E7%BD%AE)
    - [state_range](#staterange)
    - [act_range](#actrange)
    - [rules](#rules)
      - [static](#static)
      - [trager](#trager)
      - [exclusive](#exclusive)
      - [ban](#ban)
      - [relation](#relation)
  - [状态机结果](#%E7%8A%B6%E6%80%81%E6%9C%BA%E7%BB%93%E6%9E%9C)


## 基本说明
通过规则生成简单的有限状态机,具体规则参考[rule配置](#rule%E9%85%8D%E7%BD%AE)
***

## rule配置
rule文件为状态机规则配置文件,以json格式存储,Exp:
```
{
    "state_range": "a-e",
    "act_range": "A-E",
    "rules": {
        "static": "D",
        "trager": "A,B,C,E",
        "exclusive": [
            "A,B",
            "A,C"
        ],
        "relation": [
            "A<D",
            "B<C",
            "k=c",
            "j=g"
        ]
    }
}
```
### state_range
状态范围, 以小写字母表示, 从a到z, 分别表示支持了多少位的状态. 上例中"a-e"表示支持5位状态, 一共有2^5个状态
### act_range
动作范围, 以大写字母表示, 从A-Z, 与[state_range](#staterange)相似, 每一位表示支持的一个动作, `目前只支持单个动作触发, 同时只有一位动作有效`
### rules
规则描述:
#### static
表示静止的触发,该位触发后状态不变
#### trager
表示切换的触发,该位动作触发后,该位状态切换
#### exclusive
互斥, 用来描述相互互斥的状态, 上例中`A,B`,`A,C`互斥, 现象为:
```
如果A为1, 则B,C为0;
如果B为1, 则A为0, C不变;
如果C为1, 则A为0, B不变;
```
如果将`A,B,C`描述为三种模式相互切换的话,需要修改成`["A,B,C"]`, 三种动作互相互斥.<br>
互斥表同时也会对状态遍历产生约束, 不满足互斥条件的状态会被剔除.

#### ban



#### relation
`目前版本不支持`<br>
计划用于进一步表示状态规则:<br>
'=' : 用于直连某两个状态, 一个触发则另一个夜同时触发, 反之一样;<br>
'<' : 用于描述两个状态触发的关系: `A < D表示A触发则D一定触发, D触发则A不变`

***

## 状态机结果
```
[[0, 1, 2, 4, 0, 16], [1, 0, 2, 4, 1, 17], [2, 1, 0, 6, 2, 18], [4, 1, 6, 0, 4, 20], [6, 1, 4, 2, 6, 22], [8, 9, 10, 12, 8, 24], [9, 8, 10, 12, 9, 25], [10, 9, 8, 14, 10, 26], [12, 9, 14, 8, 12, 28], [14, 9, 12, 10, 14, 30], [16, 17, 18, 20, 16, 0], [17, 16, 18, 20, 17, 1], [18, 17, 16, 22, 18, 2], [20, 17, 22, 16, 20, 4], [22, 17, 20, 18, 22, 6], [24, 25, 26, 28, 24, 8], [25, 24, 26, 28, 25, 9], [26, 25, 24, 30, 26, 10], [28, 25, 30, 24, 28, 12], [30, 25, 28, 26, 30, 14]]
```
结果使用二维数组表示, 每个子数组第一个数字为当前状态, 其后顺序的为`1,2,4,8,...`分别表示`A触发`, `B触发`, `C触发`, `D触发`...之后的下一个状态值
***


